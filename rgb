// Define relay pins
const int relayRed = A0;    // Relay for Red LED strip
const int relayBlue = A1;   // Relay for Blue LED strip
const int relayGreen = A2;  // Relay for Green LED strip

bool partyModeActive = false;  // Flag to indicate if party mode is active

void setup() {
  // Set relay pins as outputs
  pinMode(relayRed, OUTPUT);
  pinMode(relayBlue, OUTPUT);
  pinMode(relayGreen, OUTPUT);

  // Initialize all relays to be off
  digitalWrite(relayRed, LOW);
  digitalWrite(relayBlue, LOW);
  digitalWrite(relayGreen, LOW);

  // Start serial communication
  Serial.begin(9600);
  
 
  digitalWrite(relayRed, HIGH);
  digitalWrite(relayBlue, HIGH);
  digitalWrite(relayGreen, HIGH);
}

void loop() {
  if (Serial.available() > 0) {
    char command = Serial.read(); // Read the command
    
    if (command != 'A' && command != 'a' && command != 'S' && command != 's' && command != 'D' && command != 'd' && command != 'P' && command != 'p') {
      partyModeActive = false; // Turn off party mode if another command is received
    }

    switch (command) {
      case '0':
        // Turn off all relays
        digitalWrite(relayRed, LOW);
        digitalWrite(relayBlue, LOW);
        digitalWrite(relayGreen, LOW);
        
        break;
      case '1':
        // Turn on red relay
        digitalWrite(relayRed, HIGH);
        digitalWrite(relayBlue, LOW);
        digitalWrite(relayGreen, LOW);
        break;
        
      case '2':
        // Turn on green relay
        digitalWrite(relayRed, LOW);
        digitalWrite(relayBlue, LOW);
        digitalWrite(relayGreen, HIGH);
        break;
        
      case '3':
        // Turn on blue relay
        digitalWrite(relayRed, LOW);
        digitalWrite(relayBlue, HIGH);
        digitalWrite(relayGreen, LOW);
        break;
        
      case '4':
        // Turn on red and green relays (yellow)
        digitalWrite(relayRed, HIGH);
        digitalWrite(relayGreen, HIGH);
        digitalWrite(relayBlue, LOW);
        break;
        
      case '5':
        // Turn on red and blue relays (magenta)
        digitalWrite(relayRed, HIGH);
        digitalWrite(relayGreen, LOW);
        digitalWrite(relayBlue, HIGH);
        break;
        
      case '6':
        // Turn on green and blue relays (cyan)
        digitalWrite(relayRed, LOW);
        digitalWrite(relayGreen, HIGH);
        digitalWrite(relayBlue, HIGH);
        break;
        
      case '7':
      case 'W':
      case 'w':
        // Turn on all relays (white)
        digitalWrite(relayRed, HIGH);
        digitalWrite(relayGreen, HIGH);
        digitalWrite(relayBlue, HIGH);
        break;
        
      case 'A':
      case 'a':
        // Red
  digitalWrite(relayRed, HIGH);
  digitalWrite(relayGreen, LOW);
  digitalWrite(relayBlue, LOW);
  delay(250);
  // Green
  digitalWrite(relayRed, LOW);
  digitalWrite(relayGreen, HIGH);
  digitalWrite(relayBlue, LOW);
  delay(250);
  // Blue
  digitalWrite(relayRed, LOW);
  digitalWrite(relayGreen, LOW);
  digitalWrite(relayBlue, HIGH);
  delay(250);
  // Yellow
  digitalWrite(relayRed, HIGH);
  digitalWrite(relayGreen, HIGH);
  digitalWrite(relayBlue, LOW);
  delay(250);
  // Magenta
  digitalWrite(relayRed, HIGH);
  digitalWrite(relayGreen, LOW);
  digitalWrite(relayBlue, HIGH);
  delay(250);
  // Cyan
  digitalWrite(relayRed, LOW);
  digitalWrite(relayGreen, HIGH);
  digitalWrite(relayBlue, HIGH);
  delay(250);
        
      case 'S':
      case 's':
        // Party mode 2: delay 200 ms
        partyModeActive = true;
        partyMode(200);
        break;
      case 'D':
      case 'd':
        // Party mode 3: delay 125 ms
        partyModeActive = true;
        partyMode(125);
        break;
      case 'P':
      case 'p':
        // Super party mode: delay 60 ms
        partyModeActive = true;
        partyMode(60);
        break;
    }
  }

  // If party mode is active, keep running the party mode
  if (partyModeActive) {
    if (Serial.available() > 0) {
      char command = Serial.read();
      if (command == 'A' || command == 'a') {
        partyMode(300);
      }  if (command == 'S' || command == 's') {
        partyMode(200);
      } if (command == 'D' || command == 'd') {
        partyMode(125);
      } if (command == 'P' || command == 'p') {
        partyMode(60);
      }
    }
  }
}

// Function for party modes
void partyMode(int delayTime) {
  // Red
  digitalWrite(relayRed, HIGH);
  digitalWrite(relayGreen, LOW);
  digitalWrite(relayBlue, LOW);
  delay(delayTime);
  // Green
  digitalWrite(relayRed, LOW);
  digitalWrite(relayGreen, HIGH);
  digitalWrite(relayBlue, LOW);
  delay(delayTime);
  // Blue
  digitalWrite(relayRed, LOW);
  digitalWrite(relayGreen, LOW);
  digitalWrite(relayBlue, HIGH);
  delay(delayTime);
  // Yellow
  digitalWrite(relayRed, HIGH);
  digitalWrite(relayGreen, HIGH);
  digitalWrite(relayBlue, LOW);
  delay(delayTime);
  // Magenta
  digitalWrite(relayRed, HIGH);
  digitalWrite(relayGreen, LOW);
  digitalWrite(relayBlue, HIGH);
  delay(delayTime);
  // Cyan
  digitalWrite(relayRed, LOW);
  digitalWrite(relayGreen, HIGH);
  digitalWrite(relayBlue, HIGH);
  delay(delayTime);
}
